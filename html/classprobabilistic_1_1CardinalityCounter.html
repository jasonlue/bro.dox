<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>bro: probabilistic::CardinalityCounter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">bro
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceprobabilistic.html">probabilistic</a></li><li class="navelem"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classprobabilistic_1_1CardinalityCounter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">probabilistic::CardinalityCounter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="CardinalityCounter_8h_source.html">CardinalityCounter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab0eb61e824982acfab1057f0b60e1a06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#ab0eb61e824982acfab1057f0b60e1a06">CardinalityCounter</a> (double error_margin, double confidence=0.95)</td></tr>
<tr class="separator:ab0eb61e824982acfab1057f0b60e1a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2501a0cd71cc8c6c8f70e54ec37509"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a0b2501a0cd71cc8c6c8f70e54ec37509">CardinalityCounter</a> (<a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a> &amp;other)</td></tr>
<tr class="separator:a0b2501a0cd71cc8c6c8f70e54ec37509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e3541d9c409adb40e513f8181952e4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a6e3541d9c409adb40e513f8181952e4e">CardinalityCounter</a> (<a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a> &amp;&amp;o)</td></tr>
<tr class="separator:a6e3541d9c409adb40e513f8181952e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab39881deadea5345afb23cae1a6b1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#acab39881deadea5345afb23cae1a6b1b">CardinalityCounter</a> (uint64_t size)</td></tr>
<tr class="separator:acab39881deadea5345afb23cae1a6b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae292f90ab415cb071e0a64d538cd8d91"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#ae292f90ab415cb071e0a64d538cd8d91">~CardinalityCounter</a> ()</td></tr>
<tr class="separator:ae292f90ab415cb071e0a64d538cd8d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f13eba1832dfc8f2ccff739eb686f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a59f13eba1832dfc8f2ccff739eb686f8">AddElement</a> (uint64_t hash)</td></tr>
<tr class="separator:a59f13eba1832dfc8f2ccff739eb686f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7854c9666b3d85b41ad36ca9f203f23"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#aa7854c9666b3d85b41ad36ca9f203f23">Size</a> () const </td></tr>
<tr class="separator:aa7854c9666b3d85b41ad36ca9f203f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d6573634766cfb2b812004caa0f3d1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#ae7d6573634766cfb2b812004caa0f3d1">Merge</a> (<a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a> *c)</td></tr>
<tr class="separator:ae7d6573634766cfb2b812004caa0f3d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4bcc45033f7217643dc0270b5d1e6fb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#ae4bcc45033f7217643dc0270b5d1e6fb">Serialize</a> (<a class="el" href="classSerialInfo.html">SerialInfo</a> *info) const </td></tr>
<tr class="separator:ae4bcc45033f7217643dc0270b5d1e6fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:add483a398e1c2fa5b9507f38412fedb1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#add483a398e1c2fa5b9507f38412fedb1">Unserialize</a> (<a class="el" href="classUnserialInfo.html">UnserialInfo</a> *info)</td></tr>
<tr class="separator:add483a398e1c2fa5b9507f38412fedb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ac2f5c3eed2ec84ebd44a86a627c45de0"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#ac2f5c3eed2ec84ebd44a86a627c45de0">GetM</a> () const </td></tr>
<tr class="separator:ac2f5c3eed2ec84ebd44a86a627c45de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d584b5dbe44f45fa1ce2ea334f1eb6"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; uint8_t &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a58d584b5dbe44f45fa1ce2ea334f1eb6">GetBuckets</a> () const </td></tr>
<tr class="separator:a58d584b5dbe44f45fa1ce2ea334f1eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a82313b6329493e169e71b248ce04eadb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a82313b6329493e169e71b248ce04eadb">CardinalityCounter</a> (uint64_t size, uint64_t <a class="el" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a>, double <a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a>)</td></tr>
<tr class="separator:a82313b6329493e169e71b248ce04eadb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af05b5a5df6c127f5326d4335cb1f786c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#af05b5a5df6c127f5326d4335cb1f786c">Init</a> (uint64_t arg_size)</td></tr>
<tr class="separator:af05b5a5df6c127f5326d4335cb1f786c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0707bcb5132637800a5afea057ccb64"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#aa0707bcb5132637800a5afea057ccb64">OptimalB</a> (double error, double confidence) const </td></tr>
<tr class="separator:aa0707bcb5132637800a5afea057ccb64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93101b95431ef3bd72debe37288732fa"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a93101b95431ef3bd72debe37288732fa">Rank</a> (uint64_t hash_modified) const </td></tr>
<tr class="separator:a93101b95431ef3bd72debe37288732fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a27bdc2ad3373f544d8ab5dd1bcaf5f2a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a27bdc2ad3373f544d8ab5dd1bcaf5f2a">flsll</a> (uint64_t mask)</td></tr>
<tr class="separator:a27bdc2ad3373f544d8ab5dd1bcaf5f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a80f5d216b330c9529d6d2d36c543a551"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a></td></tr>
<tr class="separator:a80f5d216b330c9529d6d2d36c543a551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176e9050f83c2b2720716e9287059bf5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a></td></tr>
<tr class="separator:a176e9050f83c2b2720716e9287059bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa563c504c3dde00f7ea9f6d1513cf700"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a></td></tr>
<tr class="separator:aa563c504c3dde00f7ea9f6d1513cf700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68adc4f58491bfd50a522eed94a03068"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a></td></tr>
<tr class="separator:a68adc4f58491bfd50a522eed94a03068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3ee86dbf68675d92f6621c639ae585"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a></td></tr>
<tr class="separator:a9f3ee86dbf68675d92f6621c639ae585"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A probabilistic cardinality counter using the HyperLogLog algorithm. </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8h_source.html#l00014">14</a> of file <a class="el" href="CardinalityCounter_8h_source.html">CardinalityCounter.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab0eb61e824982acfab1057f0b60e1a06"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CardinalityCounter::CardinalityCounter </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>error_margin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>confidence</em> = <code>0.95</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor.</p>
<p>The number of buckets of the data structure is determined using the error margin and the given confidence.</p>
<p>For example, assume an error_margin of 2% and a confidence of 95%. If the Size function returns an estimate of 100, this means that we are 95% sure that the cardinality is between 98 and 102.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error_margin</td><td>error margin</td></tr>
    <tr><td class="paramname">confidence</td><td>confidence of the error. Default: 0.95 </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00088">88</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">int</span> b = <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa0707bcb5132637800a5afea057ccb64">OptimalB</a>(error_margin, confidence);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#af05b5a5df6c127f5326d4335cb1f786c">Init</a>((<a class="code" href="util_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a>) pow(2, b));</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    assert(b == <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_af05b5a5df6c127f5326d4335cb1f786c"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#af05b5a5df6c127f5326d4335cb1f786c">probabilistic::CardinalityCounter::Init</a></div><div class="ttdeci">void Init(uint64_t arg_size)</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8cc_source.html#l00031">CardinalityCounter.cc:31</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a9f3ee86dbf68675d92f6621c639ae585"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">probabilistic::CardinalityCounter::p</a></div><div class="ttdeci">int p</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00197">CardinalityCounter.h:197</a></div></div>
<div class="ttc" id="util_8h_html_abc0f5bc07737e498f287334775dff2b6"><div class="ttname"><a href="util_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a></div><div class="ttdeci">uint64_t uint64</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00063">util.h:63</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa0707bcb5132637800a5afea057ccb64"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa0707bcb5132637800a5afea057ccb64">probabilistic::CardinalityCounter::OptimalB</a></div><div class="ttdeci">int OptimalB(double error, double confidence) const </div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8cc_source.html#l00013">CardinalityCounter.cc:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b2501a0cd71cc8c6c8f70e54ec37509"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CardinalityCounter::CardinalityCounter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy-Constructor </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00068">68</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    : <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>(other.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a> = other.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a> = other.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> = other.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a> = other.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a68adc4f58491bfd50a522eed94a03068"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">probabilistic::CardinalityCounter::alpha_m</a></div><div class="ttdeci">double alpha_m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00196">CardinalityCounter.h:196</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a9f3ee86dbf68675d92f6621c639ae585"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">probabilistic::CardinalityCounter::p</a></div><div class="ttdeci">int p</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00197">CardinalityCounter.h:197</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6e3541d9c409adb40e513f8181952e4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CardinalityCounter::CardinalityCounter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>o</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Move-Constructor </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00077">77</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a> = o.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a> = o.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> = o.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a> = o.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    o.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> = 0;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a> = std::move(o.<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a68adc4f58491bfd50a522eed94a03068"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">probabilistic::CardinalityCounter::alpha_m</a></div><div class="ttdeci">double alpha_m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00196">CardinalityCounter.h:196</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a9f3ee86dbf68675d92f6621c639ae585"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">probabilistic::CardinalityCounter::p</a></div><div class="ttdeci">int p</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00197">CardinalityCounter.h:197</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acab39881deadea5345afb23cae1a6b1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CardinalityCounter::CardinalityCounter </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor for a known number of buckets.</p>
<p>The error margin is 1.04/sqrt(size) with approximately 68% probability.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>number of buckets to create </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00096">96</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#af05b5a5df6c127f5326d4335cb1f786c">Init</a>(size);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_af05b5a5df6c127f5326d4335cb1f786c"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#af05b5a5df6c127f5326d4335cb1f786c">probabilistic::CardinalityCounter::Init</a></div><div class="ttdeci">void Init(uint64_t arg_size)</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8cc_source.html#l00031">CardinalityCounter.cc:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae292f90ab415cb071e0a64d538cd8d91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CardinalityCounter::~CardinalityCounter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor. </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00114">114</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a82313b6329493e169e71b248ce04eadb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CardinalityCounter::CardinalityCounter </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>alpha_m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor used when unserializing, i.e., all parameters are known. </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00101">101</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> = arg_size;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>.reserve(<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">for</span> ( uint64_t i = 0; i &lt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>; i++ )</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>.push_back(0);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a> = arg_alpha_m;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a> = arg_V;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a> = log2(m);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a68adc4f58491bfd50a522eed94a03068"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">probabilistic::CardinalityCounter::alpha_m</a></div><div class="ttdeci">double alpha_m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00196">CardinalityCounter.h:196</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a9f3ee86dbf68675d92f6621c639ae585"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">probabilistic::CardinalityCounter::p</a></div><div class="ttdeci">int p</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00197">CardinalityCounter.h:197</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a59f13eba1832dfc8f2ccff739eb686f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CardinalityCounter::AddElement </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a new element to the counter.</p>
<p>The hash function generating the hashes needs to be uniformly distributed over 64 bits.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>64-bit hash value of the element to be added </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00127">127</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    uint64_t index = hash % <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    hash = hash-index;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>[index] == 0 )</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a>--;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    uint8_t temp = <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a93101b95431ef3bd72debe37288732fa">Rank</a>(hash);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> ( temp &gt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>[index] )</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>[index] = temp;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a93101b95431ef3bd72debe37288732fa"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a93101b95431ef3bd72debe37288732fa">probabilistic::CardinalityCounter::Rank</a></div><div class="ttdeci">uint8_t Rank(uint64_t hash_modified) const </div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8cc_source.html#l00118">CardinalityCounter.cc:118</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a27bdc2ad3373f544d8ab5dd1bcaf5f2a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CardinalityCounter::flsll </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>mask</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>flsll from FreeBSD; especially Linux does not have this.</p>
<p>The following function is copied from libc/string/flsll.c from the FreeBSD source tree. Original copyright message follows </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00282">282</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordtype">int</span> bit;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> (mask == 0)</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="keywordflow">return</span> (0);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">for</span> (bit = 1; mask != 1; bit++)</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                mask = (uint64_t)mask &gt;&gt; 1;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">return</span> (bit);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a58d584b5dbe44f45fa1ce2ea334f1eb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const vector&lt; uint8_t &gt; &amp; CardinalityCounter::GetBuckets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the buckets array that holds all of the rough cardinality estimates.</p>
<p>Use <a class="el" href="classprobabilistic_1_1CardinalityCounter.html#ac2f5c3eed2ec84ebd44a86a627c45de0">GetM()</a> to determine the size.</p>
<dl class="section return"><dt>Returns</dt><dd>Array containing cardinality estimates </dd></dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00190">190</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac2f5c3eed2ec84ebd44a86a627c45de0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t CardinalityCounter::GetM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of buckets.</p>
<dl class="section return"><dt>Returns</dt><dd>Number of buckets </dd></dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00195">195</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af05b5a5df6c127f5326d4335cb1f786c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CardinalityCounter::Init </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>arg_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Helper function with code used jointly by multiple constructors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg_size</td><td>number of buckets that need to be kept </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00031">31</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> = size;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// The following magic values are taken directly out of the</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// description of the HyperLogLog algorithn.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> == 16 )</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a> = 0.673;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> == 32 )</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a> = 0.697;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> == 64 )</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a> = 0.709;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> &gt;= 128 )</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a> = 0.7213 / (1 + 1.079 / <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="Reporter_8cc.html#a25adbcf7f40a03cf61ce36b1e10bbf91">reporter</a>-&gt;<a class="code" href="classReporter.html#a1820e1da136fa37d8c7561b5a831392d">InternalError</a>(<span class="stringliteral">&quot;Invalid size %&quot;</span> PRIu64 <span class="stringliteral">&quot;. Size either has to be 16, 32, 64 or bigger than 128&quot;</span>, size);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">double</span> calc_p = log2(<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> ( trunc(calc_p) != calc_p )</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <a class="code" href="Reporter_8cc.html#a25adbcf7f40a03cf61ce36b1e10bbf91">reporter</a>-&gt;<a class="code" href="classReporter.html#a1820e1da136fa37d8c7561b5a831392d">InternalError</a>(<span class="stringliteral">&quot;Invalid size %&quot;</span> PRIu64 <span class="stringliteral">&quot;. Size either has to be a power of 2&quot;</span>, size);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a> = calc_p;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>.reserve(<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">for</span> ( uint64_t i = 0; i &lt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>; i++ )</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>.push_back(0);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    assert(<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>.size() == <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a> = <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="Reporter_8cc_html_a25adbcf7f40a03cf61ce36b1e10bbf91"><div class="ttname"><a href="Reporter_8cc.html#a25adbcf7f40a03cf61ce36b1e10bbf91">reporter</a></div><div class="ttdeci">Reporter * reporter</div><div class="ttdef"><b>Definition:</b> <a href="Reporter_8cc_source.html#l00025">Reporter.cc:25</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a68adc4f58491bfd50a522eed94a03068"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">probabilistic::CardinalityCounter::alpha_m</a></div><div class="ttdeci">double alpha_m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00196">CardinalityCounter.h:196</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a9f3ee86dbf68675d92f6621c639ae585"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">probabilistic::CardinalityCounter::p</a></div><div class="ttdeci">int p</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00197">CardinalityCounter.h:197</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
<div class="ttc" id="classReporter_html_a1820e1da136fa37d8c7561b5a831392d"><div class="ttname"><a href="classReporter.html#a1820e1da136fa37d8c7561b5a831392d">Reporter::InternalError</a></div><div class="ttdeci">void InternalError(const char *fmt,...) FMT_ATTR</div><div class="ttdef"><b>Definition:</b> <a href="Reporter_8cc_source.html#l00165">Reporter.cc:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae7d6573634766cfb2b812004caa0f3d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CardinalityCounter::Merge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Merges the argument cardinality counter with this one. The error margins of both counters have to be the same, otherwhise the merge operation will not be carried out.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>Cardinality counter to merge into the current counter.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successful </dd></dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00169">169</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a> != c-&gt;<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#ac2f5c3eed2ec84ebd44a86a627c45de0">GetM</a>() )</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keyword">const</span> vector&lt;uint8_t&gt; temp = c-&gt;<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a58d584b5dbe44f45fa1ce2ea334f1eb6">GetBuckets</a>();</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a> = 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>; i++ )</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> ( temp[i] &gt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>[i] )</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>[i] = temp[i];</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>[i] == 0 )</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            ++<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a58d584b5dbe44f45fa1ce2ea334f1eb6"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a58d584b5dbe44f45fa1ce2ea334f1eb6">probabilistic::CardinalityCounter::GetBuckets</a></div><div class="ttdeci">const std::vector&lt; uint8_t &gt; &amp; GetBuckets() const </div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8cc_source.html#l00190">CardinalityCounter.cc:190</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_ac2f5c3eed2ec84ebd44a86a627c45de0"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#ac2f5c3eed2ec84ebd44a86a627c45de0">probabilistic::CardinalityCounter::GetM</a></div><div class="ttdeci">uint64_t GetM() const </div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8cc_source.html#l00195">CardinalityCounter.cc:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa0707bcb5132637800a5afea057ccb64"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CardinalityCounter::OptimalB </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>confidence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function calculates the smallest value of b that will satisfy these the constraints of a specified error margin and confidence level.</p>
<p>The exact expression for b is as follows: Define x = 2*(log(1.04*k/error)/log(2)). Then b is the ceiling of x.</p>
<p>After that initial estimate, the value of b is increased until the standard deviation falls within the specified valud.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error</td><td>error margin</td></tr>
    <tr><td class="paramname">confidence</td><td>confidence of the error</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>minimal B-value satisfying the error-rate under confidence. </dd></dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00013">13</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    {</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keywordtype">double</span> initial_estimate = 2 * (log(1.04) - log(error)) / log(2);</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="keywordtype">int</span> answer = (int) floor(initial_estimate);</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="comment">// k is the number of standard deviations that we have to go to have</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="comment">// a confidence level of conf.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keywordtype">double</span> k = 0;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        answer++;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        k = pow(2, (answer - initial_estimate) / 2);</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    } <span class="keywordflow">while</span> ( erf(k / sqrt(2)) &lt; confidence );</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">return</span> answer;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a93101b95431ef3bd72debe37288732fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CardinalityCounter::Rank </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>hash_modified</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determines at which index (counted from the front) the first one-bit appears. The last b bits have to be 0 (the element has to be divisible by m), hence they are ignored. Always adds 1 to the result. This is the rho function from the original algorithm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash_modified</td><td>hash value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of first one-bit </dd></dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00118">118</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    hash_modified = hash_modified &gt;&gt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">p</a>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordtype">int</span> answer = 64 - p - <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a27bdc2ad3373f544d8ab5dd1bcaf5f2a">CardinalityCounter::flsll</a>(hash_modified) + 1;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    assert(answer &gt; 0 &amp;&amp; answer &lt; 64);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">return</span> answer;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a27bdc2ad3373f544d8ab5dd1bcaf5f2a"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a27bdc2ad3373f544d8ab5dd1bcaf5f2a">probabilistic::CardinalityCounter::flsll</a></div><div class="ttdeci">static int flsll(uint64_t mask)</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8cc_source.html#l00282">CardinalityCounter.cc:282</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a9f3ee86dbf68675d92f6621c639ae585"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a9f3ee86dbf68675d92f6621c639ae585">probabilistic::CardinalityCounter::p</a></div><div class="ttdeci">int p</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00197">CardinalityCounter.h:197</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae4bcc45033f7217643dc0270b5d1e6fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CardinalityCounter::Serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSerialInfo.html">SerialInfo</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Serializes the cardinality counter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>The serializaton information to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successful. </dd></dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00200">200</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordtype">bool</span> valid = <span class="keyword">true</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    valid &amp;= <a class="code" href="SerialObj_8h.html#a76896c37c8882d83c9c82f6ce3a357d4">SERIALIZE</a>(<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    valid &amp;= <a class="code" href="SerialObj_8h.html#a76896c37c8882d83c9c82f6ce3a357d4">SERIALIZE</a>(<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a>);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    valid &amp;= <a class="code" href="SerialObj_8h.html#a76896c37c8882d83c9c82f6ce3a357d4">SERIALIZE</a>(<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>; i++ )</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        valid &amp;= <a class="code" href="SerialObj_8h.html#a76896c37c8882d83c9c82f6ce3a357d4">SERIALIZE</a>((<span class="keywordtype">char</span>)<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>[i]);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">return</span> valid;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="SerialObj_8h_html_a76896c37c8882d83c9c82f6ce3a357d4"><div class="ttname"><a href="SerialObj_8h.html#a76896c37c8882d83c9c82f6ce3a357d4">SERIALIZE</a></div><div class="ttdeci">#define SERIALIZE(x)</div><div class="ttdef"><b>Definition:</b> <a href="SerialObj_8h_source.html#l00239">SerialObj.h:239</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a68adc4f58491bfd50a522eed94a03068"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">probabilistic::CardinalityCounter::alpha_m</a></div><div class="ttdeci">double alpha_m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00196">CardinalityCounter.h:196</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa7854c9666b3d85b41ad36ca9f203f23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CardinalityCounter::Size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current estimated number of elements in the data structure</p>
<dl class="section return"><dt>Returns</dt><dd>Estimated number of elements</dd></dl>
<p>Estimate the size by using the the "raw" HyperLogLog estimate. Then, check if it's too "large" or "small" because the raw estimate doesn't do well in those cases. Thus, we correct for those errors as specified in the paper.</p>
<p>Note - we deviate from the HLL algorithm in the paper here, because of our 64-bit hashes. </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00150">150</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">double</span> answer = 0;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>; i++ )</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        answer += pow(2, -((<span class="keywordtype">int</span>)<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>[i]));</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    answer = 1 / answer;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    answer = (<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a> * m * m * answer);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> ( answer &lt;= 5.0 * (m/2) )</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">return</span> m * log(((<span class="keywordtype">double</span>)m) / <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( answer &lt;= (pow(2, 64) / 30) )</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span> answer;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">return</span> -pow(2, 64) * log(1 - (answer / pow(2, 64)));</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a68adc4f58491bfd50a522eed94a03068"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">probabilistic::CardinalityCounter::alpha_m</a></div><div class="ttdeci">double alpha_m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00196">CardinalityCounter.h:196</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="add483a398e1c2fa5b9507f38412fedb1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a> * CardinalityCounter::Unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classUnserialInfo.html">UnserialInfo</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unserializes a cardinality counter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>The serializaton information to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The unserialized cardinality counter, or null if an error occured. </dd></dl>

<p>Definition at line <a class="el" href="CardinalityCounter_8cc_source.html#l00214">214</a> of file <a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    uint64_t <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    uint64_t <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">V</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">alpha_m</a>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">bool</span> valid = <span class="keyword">true</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    valid &amp;= <a class="code" href="SerialObj_8h.html#ac9f78d6f5ba626e9d5a768a197fe098c">UNSERIALIZE</a>(&amp;m);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    valid &amp;= <a class="code" href="SerialObj_8h.html#ac9f78d6f5ba626e9d5a768a197fe098c">UNSERIALIZE</a>(&amp;V);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    valid &amp;= <a class="code" href="SerialObj_8h.html#ac9f78d6f5ba626e9d5a768a197fe098c">UNSERIALIZE</a>(&amp;alpha_m);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="classprobabilistic_1_1CardinalityCounter.html">CardinalityCounter</a>* c = <span class="keyword">new</span> <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#ab0eb61e824982acfab1057f0b60e1a06">CardinalityCounter</a>(m, V, alpha_m);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    vector&lt;uint8_t&gt;&amp; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a> = c-&gt;<a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">buckets</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">m</a>; i++ )</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordtype">char</span> c;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        valid &amp;= <a class="code" href="SerialObj_8h.html#ac9f78d6f5ba626e9d5a768a197fe098c">UNSERIALIZE</a>(&amp;c);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        buckets[i] = (uint8_t)c;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> ( ! valid )</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keyword">delete</span> c;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        c = 0;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> c;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div><div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a176e9050f83c2b2720716e9287059bf5"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a176e9050f83c2b2720716e9287059bf5">probabilistic::CardinalityCounter::buckets</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00187">CardinalityCounter.h:187</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html">probabilistic::CardinalityCounter</a></div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00014">CardinalityCounter.h:14</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a68adc4f58491bfd50a522eed94a03068"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a68adc4f58491bfd50a522eed94a03068">probabilistic::CardinalityCounter::alpha_m</a></div><div class="ttdeci">double alpha_m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00196">CardinalityCounter.h:196</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_ab0eb61e824982acfab1057f0b60e1a06"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#ab0eb61e824982acfab1057f0b60e1a06">probabilistic::CardinalityCounter::CardinalityCounter</a></div><div class="ttdeci">CardinalityCounter(double error_margin, double confidence=0.95)</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8cc_source.html#l00088">CardinalityCounter.cc:88</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_a80f5d216b330c9529d6d2d36c543a551"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#a80f5d216b330c9529d6d2d36c543a551">probabilistic::CardinalityCounter::m</a></div><div class="ttdeci">uint64_t m</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00179">CardinalityCounter.h:179</a></div></div>
<div class="ttc" id="SerialObj_8h_html_ac9f78d6f5ba626e9d5a768a197fe098c"><div class="ttname"><a href="SerialObj_8h.html#ac9f78d6f5ba626e9d5a768a197fe098c">UNSERIALIZE</a></div><div class="ttdeci">#define UNSERIALIZE(x)</div><div class="ttdef"><b>Definition:</b> <a href="SerialObj_8h_source.html#l00248">SerialObj.h:248</a></div></div>
<div class="ttc" id="classprobabilistic_1_1CardinalityCounter_html_aa563c504c3dde00f7ea9f6d1513cf700"><div class="ttname"><a href="classprobabilistic_1_1CardinalityCounter.html#aa563c504c3dde00f7ea9f6d1513cf700">probabilistic::CardinalityCounter::V</a></div><div class="ttdeci">uint64_t V</div><div class="ttdef"><b>Definition:</b> <a href="CardinalityCounter_8h_source.html#l00195">CardinalityCounter.h:195</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a68adc4f58491bfd50a522eed94a03068"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double probabilistic::CardinalityCounter::alpha_m</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="CardinalityCounter_8h_source.html#l00196">196</a> of file <a class="el" href="CardinalityCounter_8h_source.html">CardinalityCounter.h</a>.</p>

</div>
</div>
<a class="anchor" id="a176e9050f83c2b2720716e9287059bf5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;uint8_t&gt; probabilistic::CardinalityCounter::buckets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>These are the actual buckets that are storing an estimate of the cardinality. All these need to do is count when the first 1 bit appears in the bitstring and that location is at most 65, so not that many bits are needed to store it. </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8h_source.html#l00187">187</a> of file <a class="el" href="CardinalityCounter_8h_source.html">CardinalityCounter.h</a>.</p>

</div>
</div>
<a class="anchor" id="a80f5d216b330c9529d6d2d36c543a551"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t probabilistic::CardinalityCounter::m</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is the number of buckets that will be stored. The standard error is 1.04/sqrt(m), so the actual cardinality will be the estimate +/- 1.04/sqrt(m) with approximately 68% probability. </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8h_source.html#l00179">179</a> of file <a class="el" href="CardinalityCounter_8h_source.html">CardinalityCounter.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9f3ee86dbf68675d92f6621c639ae585"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int probabilistic::CardinalityCounter::p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="CardinalityCounter_8h_source.html#l00197">197</a> of file <a class="el" href="CardinalityCounter_8h_source.html">CardinalityCounter.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa563c504c3dde00f7ea9f6d1513cf700"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t probabilistic::CardinalityCounter::V</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>There are some state constants that need to be kept track of to make the final estimate easier. V is the number of values in buckets that are 0 and this is used in the small error correction. alpha_m is a multiplicative constant used in the algorithm. </p>

<p>Definition at line <a class="el" href="CardinalityCounter_8h_source.html#l00195">195</a> of file <a class="el" href="CardinalityCounter_8h_source.html">CardinalityCounter.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/jasonlu/bro/src/probabilistic/<a class="el" href="CardinalityCounter_8h_source.html">CardinalityCounter.h</a></li>
<li>/home/jasonlu/bro/src/probabilistic/<a class="el" href="CardinalityCounter_8cc_source.html">CardinalityCounter.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
