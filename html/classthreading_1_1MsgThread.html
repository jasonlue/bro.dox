<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>bro: threading::MsgThread Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">bro
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacethreading.html">threading</a></li><li class="navelem"><a class="el" href="classthreading_1_1MsgThread.html">MsgThread</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classthreading_1_1MsgThread-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">threading::MsgThread Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for threading::MsgThread:</div>
<div class="dyncontent">
<div class="center"><img src="classthreading_1_1MsgThread__inherit__graph.png" border="0" usemap="#threading_1_1MsgThread_inherit__map" alt="Inheritance graph"/></div>
<map name="threading_1_1MsgThread_inherit__map" id="threading_1_1MsgThread_inherit__map">
<area shape="rect" id="node3" href="classinput_1_1ReaderBackend.html" title="input::ReaderBackend" alt="" coords="409,157,559,184"/>
<area shape="rect" id="node10" href="classlogging_1_1WriterBackend.html" title="logging::WriterBackend" alt="" coords="405,335,563,361"/>
<area shape="rect" id="node2" href="classthreading_1_1BasicThread.html" title="threading::BasicThread" alt="" coords="5,233,161,260"/>
<area shape="rect" id="node4" href="classinput_1_1reader_1_1Ascii.html" title="input::reader::Ascii" alt="" coords="629,5,760,32"/>
<area shape="rect" id="node5" href="classinput_1_1reader_1_1Benchmark.html" title="input::reader::Benchmark" alt="" coords="611,56,779,83"/>
<area shape="rect" id="node6" href="classinput_1_1reader_1_1Binary.html" title="input::reader::Binary" alt="" coords="625,107,764,133"/>
<area shape="rect" id="node7" href="classinput_1_1reader_1_1Config.html" title="input::reader::Config" alt="" coords="625,157,765,184"/>
<area shape="rect" id="node8" href="classinput_1_1reader_1_1Raw.html" title="input::reader::Raw" alt="" coords="630,208,759,235"/>
<area shape="rect" id="node9" href="classinput_1_1reader_1_1SQLite.html" title="input::reader::SQLite" alt="" coords="623,259,766,285"/>
<area shape="rect" id="node11" href="classlogging_1_1writer_1_1Ascii.html" title="logging::writer::Ascii" alt="" coords="625,309,765,336"/>
<area shape="rect" id="node12" href="classlogging_1_1writer_1_1None.html" title="logging::writer::None" alt="" coords="623,360,766,387"/>
<area shape="rect" id="node13" href="classlogging_1_1writer_1_1SQLite.html" title="logging::writer::SQLite" alt="" coords="619,411,770,437"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for threading::MsgThread:</div>
<div class="dyncontent">
<div class="center"><img src="classthreading_1_1MsgThread__coll__graph.png" border="0" usemap="#threading_1_1MsgThread_coll__map" alt="Collaboration graph"/></div>
<map name="threading_1_1MsgThread_coll__map" id="threading_1_1MsgThread_coll__map">
<area shape="rect" id="node2" href="classthreading_1_1BasicThread.html" title="threading::BasicThread" alt="" coords="5,36,161,62"/>
<area shape="rect" id="node3" href="classthreading_1_1Queue.html" title="threading::Queue\&lt; threading\l::BasicInputMessage * \&gt;" alt="" coords="247,28,433,70"/>
<area shape="rect" id="node4" href="classthreading_1_1Queue.html" title="threading::Queue\&lt; threading\l::BasicOutputMessage * \&gt;" alt="" coords="247,94,433,135"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structthreading_1_1MsgThread_1_1Stats.html">Stats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae835979f5f9a774cdbf2d9ca3502c9a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ae835979f5f9a774cdbf2d9ca3502c9a5">MsgThread</a> ()</td></tr>
<tr class="separator:ae835979f5f9a774cdbf2d9ca3502c9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae77607ee28f3914321aefb926c7d45ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ae77607ee28f3914321aefb926c7d45ca">SendIn</a> (<a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> *msg)</td></tr>
<tr class="separator:ae77607ee28f3914321aefb926c7d45ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17794419e0f78b59656a4c54a82b359e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a> (<a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> *msg)</td></tr>
<tr class="separator:a17794419e0f78b59656a4c54a82b359e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18cde531d200a5a47645745ef842fb5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ad18cde531d200a5a47645745ef842fb5">Info</a> (const char *msg)</td></tr>
<tr class="separator:ad18cde531d200a5a47645745ef842fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77284b9d8c84d2b3dc7bb8421075942"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ac77284b9d8c84d2b3dc7bb8421075942">Warning</a> (const char *msg)</td></tr>
<tr class="separator:ac77284b9d8c84d2b3dc7bb8421075942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac9d759bebe1d47a93a63be445fd7dc9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#aac9d759bebe1d47a93a63be445fd7dc9">Error</a> (const char *msg)</td></tr>
<tr class="separator:aac9d759bebe1d47a93a63be445fd7dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a2fa60bec7837ef3adcb534df0ccd12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a4a2fa60bec7837ef3adcb534df0ccd12">FatalError</a> (const char *msg)</td></tr>
<tr class="separator:a4a2fa60bec7837ef3adcb534df0ccd12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26b95e8561a0b61c261a540cb69a0bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ab26b95e8561a0b61c261a540cb69a0bc">FatalErrorWithCore</a> (const char *msg)</td></tr>
<tr class="separator:ab26b95e8561a0b61c261a540cb69a0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab449317bcc4c6c47cad49e4e88a62a52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ab449317bcc4c6c47cad49e4e88a62a52">InternalWarning</a> (const char *msg)</td></tr>
<tr class="separator:ab449317bcc4c6c47cad49e4e88a62a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93bb3736271de2ddb57265e0234858d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a93bb3736271de2ddb57265e0234858d4">InternalError</a> (const char *msg)</td></tr>
<tr class="separator:a93bb3736271de2ddb57265e0234858d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace37ae63684c752f218251702b4943db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ace37ae63684c752f218251702b4943db">GetStats</a> (<a class="el" href="structthreading_1_1MsgThread_1_1Stats.html">Stats</a> *stats)</td></tr>
<tr class="separator:ace37ae63684c752f218251702b4943db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classthreading_1_1BasicThread"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classthreading_1_1BasicThread')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classthreading_1_1BasicThread.html">threading::BasicThread</a></td></tr>
<tr class="memitem:ac333e1eb699134d4cfba0a52b775b9c1 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#ac333e1eb699134d4cfba0a52b775b9c1">BasicThread</a> ()</td></tr>
<tr class="separator:ac333e1eb699134d4cfba0a52b775b9c1 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfbe965b30835a849386f11b985d481 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a7dfbe965b30835a849386f11b985d481">BasicThread</a> (<a class="el" href="classthreading_1_1BasicThread.html">BasicThread</a> const &amp;)=delete</td></tr>
<tr class="separator:a7dfbe965b30835a849386f11b985d481 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41eef97c690f182fa6fc0510e0d8b906 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classthreading_1_1BasicThread.html">BasicThread</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a41eef97c690f182fa6fc0510e0d8b906">operator=</a> (<a class="el" href="classthreading_1_1BasicThread.html">BasicThread</a> const &amp;)=delete</td></tr>
<tr class="separator:a41eef97c690f182fa6fc0510e0d8b906 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac100a20154201ff1f74da6ad3dc44383 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">Name</a> () const </td></tr>
<tr class="separator:ac100a20154201ff1f74da6ad3dc44383 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10ab756b5df4eb5fea1f49c699fb682b inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a10ab756b5df4eb5fea1f49c699fb682b">SetName</a> (const char *<a class="el" href="classthreading_1_1BasicThread.html#a1c638b8fcfff4a7c6a3c37ee60c3f26f">name</a>)</td></tr>
<tr class="separator:a10ab756b5df4eb5fea1f49c699fb682b inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfcd78c47e60676bbc07f1a27b76290c inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#abfcd78c47e60676bbc07f1a27b76290c">SetOSName</a> (const char *<a class="el" href="classthreading_1_1BasicThread.html#a1c638b8fcfff4a7c6a3c37ee60c3f26f">name</a>)</td></tr>
<tr class="separator:abfcd78c47e60676bbc07f1a27b76290c inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d0678e5c7a8543e69e0aec30f4e891 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#ad8d0678e5c7a8543e69e0aec30f4e891">Start</a> ()</td></tr>
<tr class="separator:ad8d0678e5c7a8543e69e0aec30f4e891 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a540be3c13c3c3eb9b3c665e973e26fb8 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a540be3c13c3c3eb9b3c665e973e26fb8">SignalStop</a> ()</td></tr>
<tr class="separator:a540be3c13c3c3eb9b3c665e973e26fb8 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16198dc23b77f2d3a7e4f60cce22020b inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a16198dc23b77f2d3a7e4f60cce22020b">WaitForStop</a> ()</td></tr>
<tr class="separator:a16198dc23b77f2d3a7e4f60cce22020b inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1c2b27b2feb9c927f9a406f6b9373f8 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#ae1c2b27b2feb9c927f9a406f6b9373f8">Terminating</a> () const </td></tr>
<tr class="separator:ae1c2b27b2feb9c927f9a406f6b9373f8 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c119ad2ddad79d0f9e20a1e8345a79 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">Killed</a> () const </td></tr>
<tr class="separator:a85c119ad2ddad79d0f9e20a1e8345a79 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ffb24887ba3d926a55f87a1657b43be inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a8ffb24887ba3d926a55f87a1657b43be">Fmt</a> (const char *format,...) __attribute__((format(printf</td></tr>
<tr class="separator:a8ffb24887ba3d926a55f87a1657b43be inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a729f864b1712f1174fdd436c07c4e3a5 inherit pub_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">const char const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a729f864b1712f1174fdd436c07c4e3a5">Strerror</a> (int err)</td></tr>
<tr class="separator:a729f864b1712f1174fdd436c07c4e3a5 inherit pub_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5b6662cb2458a82933f982ce4179afd2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a5b6662cb2458a82933f982ce4179afd2">RetrieveOut</a> ()</td></tr>
<tr class="separator:a5b6662cb2458a82933f982ce4179afd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d27d82d73a1acc3aca322aaff4d820"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a83d27d82d73a1acc3aca322aaff4d820">Heartbeat</a> ()</td></tr>
<tr class="separator:a83d27d82d73a1acc3aca322aaff4d820"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cb0476a6786e990808f2147d3868d32"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a1cb0476a6786e990808f2147d3868d32">Failed</a> () const </td></tr>
<tr class="separator:a1cb0476a6786e990808f2147d3868d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c6ee4c9b5550532ae94e89fa1bcd39"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a85c6ee4c9b5550532ae94e89fa1bcd39">OnHeartbeat</a> (double <a class="el" href="util_8h.html#aafa2480e4a23e3822f639319b8a62ef3">network_time</a>, double <a class="el" href="util_8h.html#ab8e53eb243d4e042520dc0749c32750a">current_time</a>)=0</td></tr>
<tr class="separator:a85c6ee4c9b5550532ae94e89fa1bcd39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5fc16807d58ac1babcb531b368c1a10"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ac5fc16807d58ac1babcb531b368c1a10">OnFinish</a> (double <a class="el" href="util_8h.html#aafa2480e4a23e3822f639319b8a62ef3">network_time</a>)=0</td></tr>
<tr class="separator:ac5fc16807d58ac1babcb531b368c1a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ab8e545215cb92f696a9550f02920c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a74ab8e545215cb92f696a9550f02920c">Run</a> () override</td></tr>
<tr class="separator:a74ab8e545215cb92f696a9550f02920c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3189ef1ed523b0e0cf10ad9832620c1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a3189ef1ed523b0e0cf10ad9832620c1a">OnWaitForStop</a> () override</td></tr>
<tr class="separator:a3189ef1ed523b0e0cf10ad9832620c1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a030d4f14a172e727cdc55b94c1ca7693"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a030d4f14a172e727cdc55b94c1ca7693">OnSignalStop</a> () override</td></tr>
<tr class="separator:a030d4f14a172e727cdc55b94c1ca7693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0838c1e9f176cbfdea4c1c672c15f693"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a0838c1e9f176cbfdea4c1c672c15f693">OnKill</a> () override</td></tr>
<tr class="separator:a0838c1e9f176cbfdea4c1c672c15f693"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classthreading_1_1BasicThread"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classthreading_1_1BasicThread')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classthreading_1_1BasicThread.html">threading::BasicThread</a></td></tr>
<tr class="memitem:a2447cef18c6b9ec9a6646896456919bf inherit pro_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a2447cef18c6b9ec9a6646896456919bf">OnStart</a> ()</td></tr>
<tr class="separator:a2447cef18c6b9ec9a6646896456919bf inherit pro_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1e3bc6165777abe3d346fded68eded1 inherit pro_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#aa1e3bc6165777abe3d346fded68eded1">~BasicThread</a> ()</td></tr>
<tr class="separator:aa1e3bc6165777abe3d346fded68eded1 inherit pro_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81e28aba09e22a1aebf9a9d1c01f3f7 inherit pro_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#af81e28aba09e22a1aebf9a9d1c01f3f7">Join</a> ()</td></tr>
<tr class="separator:af81e28aba09e22a1aebf9a9d1c01f3f7 inherit pro_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac472d7d9aaad5e73bf62ff64ed3f098d inherit pro_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#ac472d7d9aaad5e73bf62ff64ed3f098d">Kill</a> ()</td></tr>
<tr class="separator:ac472d7d9aaad5e73bf62ff64ed3f098d inherit pro_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fcd3bd7166e7805a7ddb1e5f22c05a1 inherit pro_methods_classthreading_1_1BasicThread"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1BasicThread.html#a8fcd3bd7166e7805a7ddb1e5f22c05a1">Done</a> ()</td></tr>
<tr class="separator:a8fcd3bd7166e7805a7ddb1e5f22c05a1 inherit pro_methods_classthreading_1_1BasicThread"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:afe4a74e7009fae1362008a6121315d05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#afe4a74e7009fae1362008a6121315d05">RetrieveIn</a> ()</td></tr>
<tr class="separator:afe4a74e7009fae1362008a6121315d05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56e4bf984dd0f58c0c77c21ed80865d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a56e4bf984dd0f58c0c77c21ed80865d6">SendIn</a> (<a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> *msg, bool force)</td></tr>
<tr class="separator:a56e4bf984dd0f58c0c77c21ed80865d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84f04909ca2066090d2c09fd607ed449"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a84f04909ca2066090d2c09fd607ed449">SendOut</a> (<a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> *msg, bool force)</td></tr>
<tr class="separator:a84f04909ca2066090d2c09fd607ed449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca768a0693b51b2b8ca66249bc6accc6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#aca768a0693b51b2b8ca66249bc6accc6">HasIn</a> ()</td></tr>
<tr class="separator:aca768a0693b51b2b8ca66249bc6accc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd19f9b98b401d62ef6d1cb381973d65"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#acd19f9b98b401d62ef6d1cb381973d65">HasOut</a> ()</td></tr>
<tr class="separator:acd19f9b98b401d62ef6d1cb381973d65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae80c216d259f7a50ed282b30483768e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#ae80c216d259f7a50ed282b30483768e1">MightHaveOut</a> ()</td></tr>
<tr class="separator:ae80c216d259f7a50ed282b30483768e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a138946f549bbb406fd29d8ef8e6b6c25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a138946f549bbb406fd29d8ef8e6b6c25">Finished</a> ()</td></tr>
<tr class="separator:a138946f549bbb406fd29d8ef8e6b6c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa3fe76b0ea4071b0db75df30a7d93c60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classthreading_1_1Queue.html">Queue</a>&lt; <a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a></td></tr>
<tr class="separator:aa3fe76b0ea4071b0db75df30a7d93c60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a613cc56855b479b62e2089a58bd71d67"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classthreading_1_1Queue.html">Queue</a>&lt; <a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">queue_out</a></td></tr>
<tr class="separator:a613cc56855b479b62e2089a58bd71d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24dce9ceb45f65e8fe73df571ff36b8a"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a24dce9ceb45f65e8fe73df571ff36b8a">cnt_sent_in</a></td></tr>
<tr class="separator:a24dce9ceb45f65e8fe73df571ff36b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa980958d056c7da3d0990bbb47f62b1f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#aa980958d056c7da3d0990bbb47f62b1f">cnt_sent_out</a></td></tr>
<tr class="separator:aa980958d056c7da3d0990bbb47f62b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c4788ad382aafd77261a76688ce598f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a5c4788ad382aafd77261a76688ce598f">main_finished</a></td></tr>
<tr class="separator:a5c4788ad382aafd77261a76688ce598f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe8fc9f6aac25b057aa583e13b50853"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a2fe8fc9f6aac25b057aa583e13b50853">child_finished</a></td></tr>
<tr class="separator:a2fe8fc9f6aac25b057aa583e13b50853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a301baead4f28e12f7466a46c2f17f099"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a301baead4f28e12f7466a46c2f17f099">failed</a></td></tr>
<tr class="separator:a301baead4f28e12f7466a46c2f17f099"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:adddd5c43ff870a047aa66db4edf82a7e"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#adddd5c43ff870a047aa66db4edf82a7e">Manager</a></td></tr>
<tr class="separator:adddd5c43ff870a047aa66db4edf82a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdf97f8df82a07975999dfebe63e7f3e"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#acdf97f8df82a07975999dfebe63e7f3e">HeartbeatMessage</a></td></tr>
<tr class="separator:acdf97f8df82a07975999dfebe63e7f3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bb65d4e2daa28fee949d0a294716545"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a8bb65d4e2daa28fee949d0a294716545">FinishMessage</a></td></tr>
<tr class="separator:a8bb65d4e2daa28fee949d0a294716545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c1fc8858c79883475bb535dfd43bb86"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#a2c1fc8858c79883475bb535dfd43bb86">FinishedMessage</a></td></tr>
<tr class="separator:a2c1fc8858c79883475bb535dfd43bb86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa85709a19905369d2b22f139245d7e88"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classthreading_1_1MsgThread.html#aa85709a19905369d2b22f139245d7e88">KillMeMessage</a></td></tr>
<tr class="separator:aa85709a19905369d2b22f139245d7e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A specialized thread that provides bi-directional message passing between <a class="el" href="namespaceBro.html">Bro</a>'s main thread and the child thread. Messages are instances of <a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> and <a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> for message sent <em>to</em> the child thread and received <em>from</em> the child thread, respectively.</p>
<p>The thread's <a class="el" href="classthreading_1_1MsgThread.html#a74ab8e545215cb92f696a9550f02920c">Run()</a> method implements main loop that processes incoming messages until <a class="el" href="classthreading_1_1BasicThread.html#ae1c2b27b2feb9c927f9a406f6b9373f8">Terminating()</a> indicates that execution should stop. Once that happens, the thread stops accepting any new messages, finishes processes all remaining ones still in the queue, and then exits. </p>

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00027">27</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae835979f5f9a774cdbf2d9ca3502c9a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MsgThread::MsgThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. It automatically registers the thread with the <a class="el" href="classthreading_1_1Manager.html">threading::Manager</a>.</p>
<p>Only <a class="el" href="namespaceBro.html">Bro</a>'s main thread may instantiate a new thread. </p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00174">174</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                     : <a class="code" href="classthreading_1_1BasicThread.html#ac333e1eb699134d4cfba0a52b775b9c1">BasicThread</a>(), <a class="code" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a>(<span class="keyword">this</span>, 0), <a class="code" href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">queue_out</a>(0, <span class="keyword">this</span>)</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a24dce9ceb45f65e8fe73df571ff36b8a">cnt_sent_in</a> = <a class="code" href="classthreading_1_1MsgThread.html#aa980958d056c7da3d0990bbb47f62b1f">cnt_sent_out</a> = 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a5c4788ad382aafd77261a76688ce598f">main_finished</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a2fe8fc9f6aac25b057aa583e13b50853">child_finished</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a301baead4f28e12f7466a46c2f17f099">failed</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="main_8cc.html#a2d323cb7b38ab234374cdbbc04480b58">thread_mgr</a>-&gt;<a class="code" href="classthreading_1_1Manager.html#af7108ae8ddf779b9cc5edfee835bcfb0">AddMsgThread</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div><div class="ttc" id="classthreading_1_1MsgThread_html_a301baead4f28e12f7466a46c2f17f099"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a301baead4f28e12f7466a46c2f17f099">threading::MsgThread::failed</a></div><div class="ttdeci">bool failed</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00310">MsgThread.h:310</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a5c4788ad382aafd77261a76688ce598f"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a5c4788ad382aafd77261a76688ce598f">threading::MsgThread::main_finished</a></div><div class="ttdeci">bool main_finished</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00308">MsgThread.h:308</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aa980958d056c7da3d0990bbb47f62b1f"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa980958d056c7da3d0990bbb47f62b1f">threading::MsgThread::cnt_sent_out</a></div><div class="ttdeci">uint64_t cnt_sent_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00306">MsgThread.h:306</a></div></div>
<div class="ttc" id="main_8cc_html_a2d323cb7b38ab234374cdbbc04480b58"><div class="ttname"><a href="main_8cc.html#a2d323cb7b38ab234374cdbbc04480b58">thread_mgr</a></div><div class="ttdeci">threading::Manager * thread_mgr</div><div class="ttdef"><b>Definition:</b> <a href="main_8cc_source.html#l00088">main.cc:88</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a24dce9ceb45f65e8fe73df571ff36b8a"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a24dce9ceb45f65e8fe73df571ff36b8a">threading::MsgThread::cnt_sent_in</a></div><div class="ttdeci">uint64_t cnt_sent_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00305">MsgThread.h:305</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a2fe8fc9f6aac25b057aa583e13b50853"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a2fe8fc9f6aac25b057aa583e13b50853">threading::MsgThread::child_finished</a></div><div class="ttdeci">bool child_finished</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00309">MsgThread.h:309</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_ac333e1eb699134d4cfba0a52b775b9c1"><div class="ttname"><a href="classthreading_1_1BasicThread.html#ac333e1eb699134d4cfba0a52b775b9c1">threading::BasicThread::BasicThread</a></div><div class="ttdeci">BasicThread()</div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8cc_source.html#l00024">BasicThread.cc:24</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a613cc56855b479b62e2089a58bd71d67"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">threading::MsgThread::queue_out</a></div><div class="ttdeci">Queue&lt; BasicOutputMessage * &gt; queue_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00303">MsgThread.h:303</a></div></div>
<div class="ttc" id="classthreading_1_1Manager_html_af7108ae8ddf779b9cc5edfee835bcfb0"><div class="ttname"><a href="classthreading_1_1Manager.html#af7108ae8ddf779b9cc5edfee835bcfb0">threading::Manager::AddMsgThread</a></div><div class="ttdeci">void AddMsgThread(MsgThread *thread)</div><div class="ttdef"><b>Definition:</b> <a href="threading_2Manager_8cc_source.html#l00062">Manager.cc:62</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aa3fe76b0ea4071b0db75df30a7d93c60"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">threading::MsgThread::queue_in</a></div><div class="ttdeci">Queue&lt; BasicInputMessage * &gt; queue_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00302">MsgThread.h:302</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aac9d759bebe1d47a93a63be445fd7dc9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::Error </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reports a non-fatal error from the child thread. The main thread will pass this to the <a class="el" href="classReporter.html">Reporter</a> once received. Processing proceeds normally after the error has been reported.</p>
<p>Only the child thread may call this method.</p>
<p>Can be overriden in derived classed to hook into the error handling but must should generally also call the parent implementation. Note that this method is always called by the child thread and must not access data or datastructures of the main thread directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message. It will be prefixed with the thread's name. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classinput_1_1ReaderBackend.html#a519c3acf7b5ed0342a6333611a01d4b3">input::ReaderBackend</a>.</p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00280">280</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1ReporterMessage.html">ReporterMessage</a>(<a class="code" href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a3c163b4cfc1a0db2130d83b210aef795">ReporterMessage::ERROR</a>, <span class="keyword">this</span>, msg));</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div><div class="ttc" id="classthreading_1_1ReporterMessage_html_a21d1ec6cb345947ebdb7677880b00127a3c163b4cfc1a0db2130d83b210aef795"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a3c163b4cfc1a0db2130d83b210aef795">threading::ReporterMessage::ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00071">MsgThread.cc:71</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
<div class="ttc" id="classthreading_1_1ReporterMessage_html"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html">threading::ReporterMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00067">MsgThread.cc:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1cb0476a6786e990808f2147d3868d32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool threading::MsgThread::Failed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if a child command has reported a failure. In that case, we'll be in the process of killing this thread and no further activity should carried out. To be called only from this child thread. </p>

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00213">213</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classthreading_1_1MsgThread.html#a301baead4f28e12f7466a46c2f17f099">failed</a>; }</div><div class="ttc" id="classthreading_1_1MsgThread_html_a301baead4f28e12f7466a46c2f17f099"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a301baead4f28e12f7466a46c2f17f099">threading::MsgThread::failed</a></div><div class="ttdeci">bool failed</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00310">MsgThread.h:310</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4a2fa60bec7837ef3adcb534df0ccd12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::FatalError </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reports a fatal error from the child thread. The main thread will pass this to the <a class="el" href="classReporter.html">Reporter</a> once received. <a class="el" href="namespaceBro.html">Bro</a> will terminate after the message has been reported.</p>
<p>Only the child thread may call this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message. It will be prefixed with the thread's name. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00285">285</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1ReporterMessage.html">ReporterMessage</a>(<a class="code" href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a152368bdd6f950bd8f041f60c1f29e01">ReporterMessage::FATAL_ERROR</a>, <span class="keyword">this</span>, msg));</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div><div class="ttc" id="classthreading_1_1ReporterMessage_html_a21d1ec6cb345947ebdb7677880b00127a152368bdd6f950bd8f041f60c1f29e01"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a152368bdd6f950bd8f041f60c1f29e01">threading::ReporterMessage::FATAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00071">MsgThread.cc:71</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
<div class="ttc" id="classthreading_1_1ReporterMessage_html"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html">threading::ReporterMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00067">MsgThread.cc:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab26b95e8561a0b61c261a540cb69a0bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::FatalErrorWithCore </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reports a fatal error from the child thread. The main thread will pass this to the <a class="el" href="classReporter.html">Reporter</a> once received. <a class="el" href="namespaceBro.html">Bro</a> will terminate with a core dump after the message has been reported.</p>
<p>Only the child thread may call this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message. It will be prefixed with the thread's name. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00290">290</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1ReporterMessage.html">ReporterMessage</a>(<a class="code" href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a2f3834b4c169704d1c6d31f66a2966c8">ReporterMessage::FATAL_ERROR_WITH_CORE</a>, <span class="keyword">this</span>, msg));</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="ttc" id="classthreading_1_1ReporterMessage_html_a21d1ec6cb345947ebdb7677880b00127a2f3834b4c169704d1c6d31f66a2966c8"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a2f3834b4c169704d1c6d31f66a2966c8">threading::ReporterMessage::FATAL_ERROR_WITH_CORE</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00071">MsgThread.cc:71</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
<div class="ttc" id="classthreading_1_1ReporterMessage_html"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html">threading::ReporterMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00067">MsgThread.cc:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a138946f549bbb406fd29d8ef8e6b6c25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::Finished </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends a message to the main thread signaling that the child process has finished processing. Called from child. </p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00264">264</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a2fe8fc9f6aac25b057aa583e13b50853">child_finished</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1MsgThread.html#a2c1fc8858c79883475bb535dfd43bb86">FinishedMessage</a>(<span class="keyword">this</span>));</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="ttc" id="classthreading_1_1MsgThread_html_a2c1fc8858c79883475bb535dfd43bb86"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a2c1fc8858c79883475bb535dfd43bb86">threading::MsgThread::FinishedMessage</a></div><div class="ttdeci">friend class FinishedMessage</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00183">MsgThread.h:183</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a2fe8fc9f6aac25b057aa583e13b50853"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a2fe8fc9f6aac25b057aa583e13b50853">threading::MsgThread::child_finished</a></div><div class="ttdeci">bool child_finished</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00309">MsgThread.h:309</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ace37ae63684c752f218251702b4943db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::GetStats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthreading_1_1MsgThread_1_1Stats.html">Stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns statistics about the inter-thread communication.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stats</td><td>A pointer to a structure that will be filled with current numbers. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00406">406</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    stats-&gt;sent_in = <a class="code" href="classthreading_1_1MsgThread.html#a24dce9ceb45f65e8fe73df571ff36b8a">cnt_sent_in</a>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    stats-&gt;sent_out = <a class="code" href="classthreading_1_1MsgThread.html#aa980958d056c7da3d0990bbb47f62b1f">cnt_sent_out</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    stats-&gt;pending_in = <a class="code" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a>.Size();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    stats-&gt;pending_out = <a class="code" href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">queue_out</a>.Size();</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a>.GetStats(&amp;stats-&gt;queue_in_stats);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">queue_out</a>.GetStats(&amp;stats-&gt;queue_out_stats);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div><div class="ttc" id="classthreading_1_1MsgThread_html_aa980958d056c7da3d0990bbb47f62b1f"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa980958d056c7da3d0990bbb47f62b1f">threading::MsgThread::cnt_sent_out</a></div><div class="ttdeci">uint64_t cnt_sent_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00306">MsgThread.h:306</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a24dce9ceb45f65e8fe73df571ff36b8a"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a24dce9ceb45f65e8fe73df571ff36b8a">threading::MsgThread::cnt_sent_in</a></div><div class="ttdeci">uint64_t cnt_sent_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00305">MsgThread.h:305</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a613cc56855b479b62e2089a58bd71d67"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">threading::MsgThread::queue_out</a></div><div class="ttdeci">Queue&lt; BasicOutputMessage * &gt; queue_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00303">MsgThread.h:303</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aa3fe76b0ea4071b0db75df30a7d93c60"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">threading::MsgThread::queue_in</a></div><div class="ttdeci">Queue&lt; BasicInputMessage * &gt; queue_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00302">MsgThread.h:302</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aca768a0693b51b2b8ca66249bc6accc6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool threading::MsgThread::HasIn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if there's at least one message pending for the child thread. </p>

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00282">282</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a>.Ready(); }</div><div class="ttc" id="classthreading_1_1MsgThread_html_aa3fe76b0ea4071b0db75df30a7d93c60"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">threading::MsgThread::queue_in</a></div><div class="ttdeci">Queue&lt; BasicInputMessage * &gt; queue_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00302">MsgThread.h:302</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acd19f9b98b401d62ef6d1cb381973d65"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool threading::MsgThread::HasOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if there's at least one message pending for the main thread. </p>

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00288">288</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">queue_out</a>.Ready(); }</div><div class="ttc" id="classthreading_1_1MsgThread_html_a613cc56855b479b62e2089a58bd71d67"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">threading::MsgThread::queue_out</a></div><div class="ttdeci">Queue&lt; BasicOutputMessage * &gt; queue_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00303">MsgThread.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a83d27d82d73a1acc3aca322aaff4d820"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::Heartbeat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Triggers a heartbeat message being sent to the client thread.</p>
<p>This is method is called regularly by the <a class="el" href="classthreading_1_1Manager.html">threading::Manager</a>.</p>
<p>Can be overriden in derived classed to hook into the heart beat sending, but must call the parent implementation. Note that this method is always called by the main thread and must not access data of the child thread directly. Implement <a class="el" href="classthreading_1_1MsgThread.html#a85c6ee4c9b5550532ae94e89fa1bcd39">OnHeartbeat()</a> if you want to do something on the child-side. </p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00259">259</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#ae77607ee28f3914321aefb926c7d45ca">SendIn</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1MsgThread.html#acdf97f8df82a07975999dfebe63e7f3e">HeartbeatMessage</a>(<span class="keyword">this</span>, <a class="code" href="Net_8cc.html#aafa2480e4a23e3822f639319b8a62ef3">network_time</a>, <a class="code" href="util_8cc.html#a83a8a97c9755bc3c5264e6f966a1e845">current_time</a>()));</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="ttc" id="classthreading_1_1MsgThread_html_ae77607ee28f3914321aefb926c7d45ca"><div class="ttname"><a href="classthreading_1_1MsgThread.html#ae77607ee28f3914321aefb926c7d45ca">threading::MsgThread::SendIn</a></div><div class="ttdeci">void SendIn(BasicInputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00046">MsgThread.h:46</a></div></div>
<div class="ttc" id="util_8cc_html_a83a8a97c9755bc3c5264e6f966a1e845"><div class="ttname"><a href="util_8cc.html#a83a8a97c9755bc3c5264e6f966a1e845">current_time</a></div><div class="ttdeci">double current_time(bool real)</div><div class="ttdef"><b>Definition:</b> <a href="util_8cc_source.html#l01435">util.cc:1435</a></div></div>
<div class="ttc" id="Net_8cc_html_aafa2480e4a23e3822f639319b8a62ef3"><div class="ttname"><a href="Net_8cc.html#aafa2480e4a23e3822f639319b8a62ef3">network_time</a></div><div class="ttdeci">double network_time</div><div class="ttdef"><b>Definition:</b> <a href="Net_8cc_source.html#l00054">Net.cc:54</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_acdf97f8df82a07975999dfebe63e7f3e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#acdf97f8df82a07975999dfebe63e7f3e">threading::MsgThread::HeartbeatMessage</a></div><div class="ttdeci">friend class HeartbeatMessage</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00181">MsgThread.h:181</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad18cde531d200a5a47645745ef842fb5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::Info </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reports an informational message from the child thread. The main thread will pass this to the <a class="el" href="classReporter.html">Reporter</a> once received.</p>
<p>Only the child thread may call this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message. It will be prefixed with the thread's name. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classinput_1_1ReaderBackend.html#a828e3d64beb2035e4a2be8cbf7ded246">input::ReaderBackend</a>.</p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00270">270</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1ReporterMessage.html">ReporterMessage</a>(<a class="code" href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a97daea3820b9370182f79edd34f45ff2">ReporterMessage::INFO</a>, <span class="keyword">this</span>, msg));</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div><div class="ttc" id="classthreading_1_1ReporterMessage_html_a21d1ec6cb345947ebdb7677880b00127a97daea3820b9370182f79edd34f45ff2"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a97daea3820b9370182f79edd34f45ff2">threading::ReporterMessage::INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00071">MsgThread.cc:71</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
<div class="ttc" id="classthreading_1_1ReporterMessage_html"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html">threading::ReporterMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00067">MsgThread.cc:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a93bb3736271de2ddb57265e0234858d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::InternalError </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reports an internal program error from the child thread. The main thread will pass this to the <a class="el" href="classReporter.html">Reporter</a> once received. <a class="el" href="namespaceBro.html">Bro</a> will terminate with a core dump after the message has been reported.</p>
<p>Only the child thread may call this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message. It will be prefixed with the thread's name. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00300">300</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// This one aborts immediately.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    fprintf(stderr, <span class="stringliteral">&quot;internal error in thread: %s\n&quot;</span>, msg);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    abort();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab449317bcc4c6c47cad49e4e88a62a52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::InternalWarning </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reports a potential internal problem from the child thread. The main thread will pass this to the <a class="el" href="classReporter.html">Reporter</a> once received. <a class="el" href="namespaceBro.html">Bro</a> will continue normally.</p>
<p>Only the child thread may call this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message. It will be prefixed with the thread's name. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00295">295</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1ReporterMessage.html">ReporterMessage</a>(<a class="code" href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a37d345e86c2106b36379fc499fb093f3">ReporterMessage::INTERNAL_WARNING</a>, <span class="keyword">this</span>, msg));</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div><div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
<div class="ttc" id="classthreading_1_1ReporterMessage_html_a21d1ec6cb345947ebdb7677880b00127a37d345e86c2106b36379fc499fb093f3"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127a37d345e86c2106b36379fc499fb093f3">threading::ReporterMessage::INTERNAL_WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00072">MsgThread.cc:72</a></div></div>
<div class="ttc" id="classthreading_1_1ReporterMessage_html"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html">threading::ReporterMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00067">MsgThread.cc:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae80c216d259f7a50ed282b30483768e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool threading::MsgThread::MightHaveOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if there might be at least one message pending for the main thread. This function may occasionally return a value not indicating the actual state, but won't do so very often. </p>

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00295">295</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">queue_out</a>.MaybeReady(); }</div><div class="ttc" id="classthreading_1_1MsgThread_html_a613cc56855b479b62e2089a58bd71d67"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">threading::MsgThread::queue_out</a></div><div class="ttdeci">Queue&lt; BasicOutputMessage * &gt; queue_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00303">MsgThread.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac5fc16807d58ac1babcb531b368c1a10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool threading::MsgThread::OnFinish </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>network_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Triggered for execution in the child thread just before shutting threads down. The child thread should finish its operations. </p>

<p>Implemented in <a class="el" href="classlogging_1_1WriterBackend.html#a755766527d0eb7f115dddd6d8d510524">logging::WriterBackend</a>, and <a class="el" href="classinput_1_1ReaderBackend.html#a793bb30401a728b0f551a3ee2a1ec4cf">input::ReaderBackend</a>.</p>

</div>
</div>
<a class="anchor" id="a85c6ee4c9b5550532ae94e89fa1bcd39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool threading::MsgThread::OnHeartbeat </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>network_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>current_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Regulatly triggered for execution in the child thread.</p>
<p>network_time: The network_time when the heartbeat was trigger by the main thread.</p>
<p>current_time: Wall clock when the heartbeat was trigger by the main thread. </p>

<p>Implemented in <a class="el" href="classlogging_1_1WriterBackend.html#aa885bd6dd40da38dd2da3c1e88497765">logging::WriterBackend</a>, and <a class="el" href="classinput_1_1ReaderBackend.html#a7a9adb5f73c9cb92af819b4558ebe2ac">input::ReaderBackend</a>.</p>

</div>
</div>
<a class="anchor" id="a0838c1e9f176cbfdea4c1c672c15f693"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::OnKill </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Executed with <a class="el" href="classthreading_1_1BasicThread.html#ac472d7d9aaad5e73bf62ff64ed3f098d">Kill()</a>. This is a hook into killing the thread. </p>

<p>Reimplemented from <a class="el" href="classthreading_1_1BasicThread.html#a70b187e9c577063e0b6aea266d3091ce">threading::BasicThread</a>.</p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00251">251</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// Send a message to unblock the reader if its currently waiting for</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// input. This is just an optimization to make it terminate more</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// quickly, even without the message it will eventually time out.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a>.WakeUp();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div><div class="ttc" id="classthreading_1_1MsgThread_html_aa3fe76b0ea4071b0db75df30a7d93c60"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">threading::MsgThread::queue_in</a></div><div class="ttdeci">Queue&lt; BasicInputMessage * &gt; queue_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00302">MsgThread.h:302</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a030d4f14a172e727cdc55b94c1ca7693"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::OnSignalStop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Executed with <a class="el" href="classthreading_1_1BasicThread.html#a540be3c13c3c3eb9b3c665e973e26fb8">SignalStop()</a>. This is a hook into preparing the thread for stopping. It will be called from <a class="el" href="namespaceBro.html">Bro</a>'s main thread before the thread has been signaled to stop. </p>

<p>Reimplemented from <a class="el" href="classthreading_1_1BasicThread.html#a23892aa1c1eebebb91ef4f3de3f4fe61">threading::BasicThread</a>.</p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00186">186</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classthreading_1_1MsgThread.html#a5c4788ad382aafd77261a76688ce598f">main_finished</a> || <a class="code" href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">Killed</a>() )</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// Signal thread to terminate.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#ae77607ee28f3914321aefb926c7d45ca">SendIn</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1MsgThread.html#a8bb65d4e2daa28fee949d0a294716545">FinishMessage</a>(<span class="keyword">this</span>, <a class="code" href="Net_8cc.html#aafa2480e4a23e3822f639319b8a62ef3">network_time</a>), <span class="keyword">true</span>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="ttc" id="classthreading_1_1MsgThread_html_ae77607ee28f3914321aefb926c7d45ca"><div class="ttname"><a href="classthreading_1_1MsgThread.html#ae77607ee28f3914321aefb926c7d45ca">threading::MsgThread::SendIn</a></div><div class="ttdeci">void SendIn(BasicInputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00046">MsgThread.h:46</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a5c4788ad382aafd77261a76688ce598f"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a5c4788ad382aafd77261a76688ce598f">threading::MsgThread::main_finished</a></div><div class="ttdeci">bool main_finished</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00308">MsgThread.h:308</a></div></div>
<div class="ttc" id="Net_8cc_html_aafa2480e4a23e3822f639319b8a62ef3"><div class="ttname"><a href="Net_8cc.html#aafa2480e4a23e3822f639319b8a62ef3">network_time</a></div><div class="ttdeci">double network_time</div><div class="ttdef"><b>Definition:</b> <a href="Net_8cc_source.html#l00054">Net.cc:54</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_a85c119ad2ddad79d0f9e20a1e8345a79"><div class="ttname"><a href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">threading::BasicThread::Killed</a></div><div class="ttdeci">bool Killed() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00113">BasicThread.h:113</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a8bb65d4e2daa28fee949d0a294716545"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a8bb65d4e2daa28fee949d0a294716545">threading::MsgThread::FinishMessage</a></div><div class="ttdeci">friend class FinishMessage</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00182">MsgThread.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3189ef1ed523b0e0cf10ad9832620c1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::OnWaitForStop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Executed with <a class="el" href="classthreading_1_1BasicThread.html#a16198dc23b77f2d3a7e4f60cce22020b">WaitForStop()</a>. This is a hook into waiting for the thread to stop. It must be overridden by derived classes and only return once the thread has indeed finished processing. The method will be called from <a class="el" href="namespaceBro.html">Bro</a>'s main thread. </p>

<p>Implements <a class="el" href="classthreading_1_1BasicThread.html#ad5fdeabc5afabd4fc7ca445402240105">threading::BasicThread</a>.</p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00195">195</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">int</span> signal_count = 0;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">int</span> old_signal_val = <a class="code" href="MsgThread_8cc.html#a47271410f61bd12abbb6c29b1bee8f20">signal_val</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="MsgThread_8cc.html#a47271410f61bd12abbb6c29b1bee8f20">signal_val</a> = 0;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">int</span> cnt = 0;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    uint64_t last_size = 0;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    uint64_t cur_size = 0;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">while</span> ( ! <a class="code" href="classthreading_1_1MsgThread.html#a5c4788ad382aafd77261a76688ce598f">main_finished</a> )</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">// Terminate if we get another kill signal.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="MsgThread_8cc.html#a47271410f61bd12abbb6c29b1bee8f20">signal_val</a> == SIGTERM || <a class="code" href="MsgThread_8cc.html#a47271410f61bd12abbb6c29b1bee8f20">signal_val</a> == SIGINT )</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            ++signal_count;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">if</span> ( signal_count == 1 )</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="comment">// Abort all threads here so that we won&#39;t hang next</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="comment">// on another one.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;received signal while waiting for thread %s, aborting all ...\n&quot;</span>, <a class="code" href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">Name</a>());</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <a class="code" href="main_8cc.html#a2d323cb7b38ab234374cdbbc04480b58">thread_mgr</a>-&gt;<a class="code" href="classthreading_1_1Manager.html#a1dae59cc4fc3e260c22e3fb4e5210384">KillThreads</a>();</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="comment">// More than one signal. Abort processing</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <span class="comment">// right away. on another one.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;received another signal while waiting for thread %s, aborting processing\n&quot;</span>, <a class="code" href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">Name</a>());</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                exit(1);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <a class="code" href="MsgThread_8cc.html#a47271410f61bd12abbb6c29b1bee8f20">signal_val</a> = 0;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">Killed</a>() )</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <a class="code" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a>.WakeUp();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">while</span> ( <a class="code" href="classthreading_1_1MsgThread.html#acd19f9b98b401d62ef6d1cb381973d65">HasOut</a>() )</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <a class="code" href="classthreading_1_1Message.html">Message</a>* msg = <a class="code" href="classthreading_1_1MsgThread.html#a5b6662cb2458a82933f982ce4179afd2">RetrieveOut</a>();</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            assert ( msg );</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">if</span> ( ! msg-&gt;<a class="code" href="classthreading_1_1Message.html#a03586bce9caf0b5e493947525508d4d1">Process</a>() )</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <a class="code" href="Reporter_8cc.html#a25adbcf7f40a03cf61ce36b1e10bbf91">reporter</a>-&gt;<a class="code" href="classReporter.html#ac67df7fad58e8835b7b4df857ee82363">Error</a>(<span class="stringliteral">&quot;%s failed during thread termination&quot;</span>, msg-&gt;<a class="code" href="classthreading_1_1Message.html#a4183548b421e0ddaa7de8006d174c939">Name</a>());</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keyword">delete</span> msg;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> ( ! <a class="code" href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">Killed</a>() )</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            usleep(1000);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="MsgThread_8cc.html#a47271410f61bd12abbb6c29b1bee8f20">signal_val</a> = old_signal_val;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div><div class="ttc" id="classthreading_1_1Message_html"><div class="ttname"><a href="classthreading_1_1Message.html">threading::Message</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00316">MsgThread.h:316</a></div></div>
<div class="ttc" id="Reporter_8cc_html_a25adbcf7f40a03cf61ce36b1e10bbf91"><div class="ttname"><a href="Reporter_8cc.html#a25adbcf7f40a03cf61ce36b1e10bbf91">reporter</a></div><div class="ttdeci">Reporter * reporter</div><div class="ttdef"><b>Definition:</b> <a href="Reporter_8cc_source.html#l00025">Reporter.cc:25</a></div></div>
<div class="ttc" id="MsgThread_8cc_html_a47271410f61bd12abbb6c29b1bee8f20"><div class="ttname"><a href="MsgThread_8cc.html#a47271410f61bd12abbb6c29b1bee8f20">signal_val</a></div><div class="ttdeci">int signal_val</div><div class="ttdef"><b>Definition:</b> <a href="main_8cc_source.html#l00112">main.cc:112</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a5c4788ad382aafd77261a76688ce598f"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a5c4788ad382aafd77261a76688ce598f">threading::MsgThread::main_finished</a></div><div class="ttdeci">bool main_finished</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00308">MsgThread.h:308</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a5b6662cb2458a82933f982ce4179afd2"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a5b6662cb2458a82933f982ce4179afd2">threading::MsgThread::RetrieveOut</a></div><div class="ttdeci">BasicOutputMessage * RetrieveOut()</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00344">MsgThread.cc:344</a></div></div>
<div class="ttc" id="main_8cc_html_a2d323cb7b38ab234374cdbbc04480b58"><div class="ttname"><a href="main_8cc.html#a2d323cb7b38ab234374cdbbc04480b58">thread_mgr</a></div><div class="ttdeci">threading::Manager * thread_mgr</div><div class="ttdef"><b>Definition:</b> <a href="main_8cc_source.html#l00088">main.cc:88</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_acd19f9b98b401d62ef6d1cb381973d65"><div class="ttname"><a href="classthreading_1_1MsgThread.html#acd19f9b98b401d62ef6d1cb381973d65">threading::MsgThread::HasOut</a></div><div class="ttdeci">bool HasOut()</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00288">MsgThread.h:288</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_ac100a20154201ff1f74da6ad3dc44383"><div class="ttname"><a href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">threading::BasicThread::Name</a></div><div class="ttdeci">const char * Name() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00046">BasicThread.h:46</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_a85c119ad2ddad79d0f9e20a1e8345a79"><div class="ttname"><a href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">threading::BasicThread::Killed</a></div><div class="ttdeci">bool Killed() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00113">BasicThread.h:113</a></div></div>
<div class="ttc" id="classReporter_html_ac67df7fad58e8835b7b4df857ee82363"><div class="ttname"><a href="classReporter.html#ac67df7fad58e8835b7b4df857ee82363">Reporter::Error</a></div><div class="ttdeci">void Error(const char *fmt,...) FMT_ATTR</div><div class="ttdef"><b>Definition:</b> <a href="Reporter_8cc_source.html#l00096">Reporter.cc:96</a></div></div>
<div class="ttc" id="classthreading_1_1Message_html_a03586bce9caf0b5e493947525508d4d1"><div class="ttname"><a href="classthreading_1_1Message.html#a03586bce9caf0b5e493947525508d4d1">threading::Message::Process</a></div><div class="ttdeci">virtual bool Process()=0</div></div>
<div class="ttc" id="classthreading_1_1Manager_html_a1dae59cc4fc3e260c22e3fb4e5210384"><div class="ttname"><a href="classthreading_1_1Manager.html#a1dae59cc4fc3e260c22e3fb4e5210384">threading::Manager::KillThreads</a></div><div class="ttdeci">void KillThreads()</div><div class="ttdef"><b>Definition:</b> <a href="threading_2Manager_8cc_source.html#l00096">Manager.cc:96</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aa3fe76b0ea4071b0db75df30a7d93c60"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">threading::MsgThread::queue_in</a></div><div class="ttdeci">Queue&lt; BasicInputMessage * &gt; queue_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00302">MsgThread.h:302</a></div></div>
<div class="ttc" id="classthreading_1_1Message_html_a4183548b421e0ddaa7de8006d174c939"><div class="ttname"><a href="classthreading_1_1Message.html#a4183548b421e0ddaa7de8006d174c939">threading::Message::Name</a></div><div class="ttdeci">const char * Name() const </div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00329">MsgThread.h:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe4a74e7009fae1362008a6121315d05"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> * MsgThread::RetrieveIn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pops a message sent by the main thread from the main-to-chold queue.</p>
<p>Must only be called by the child thread.</p>
<dl class="section return"><dt>Returns</dt><dd>The message, wth ownership passed to caller. Returns null if the queue is empty. </dd></dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00355">355</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a>* msg = <a class="code" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a>.Get();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> ( ! msg )</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">string</span> s = <a class="code" href="classthreading_1_1BasicThread.html#a8ffb24887ba3d926a55f87a1657b43be">Fmt</a>(<span class="stringliteral">&quot;Retrieved &#39;%s&#39; in %s&quot;</span>,  msg-&gt;<a class="code" href="classthreading_1_1Message.html#a4183548b421e0ddaa7de8006d174c939">Name</a>(), <a class="code" href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">Name</a>());</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    Debug(DBG_THREADING, s.c_str());</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div><div class="ttc" id="classthreading_1_1BasicInputMessage_html"><div class="ttname"><a href="classthreading_1_1BasicInputMessage.html">threading::BasicInputMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00353">MsgThread.h:353</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_a8ffb24887ba3d926a55f87a1657b43be"><div class="ttname"><a href="classthreading_1_1BasicThread.html#a8ffb24887ba3d926a55f87a1657b43be">threading::BasicThread::Fmt</a></div><div class="ttdeci">const char * Fmt(const char *format,...) __attribute__((format(printf</div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8cc_source.html#l00072">BasicThread.cc:72</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_ac100a20154201ff1f74da6ad3dc44383"><div class="ttname"><a href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">threading::BasicThread::Name</a></div><div class="ttdeci">const char * Name() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00046">BasicThread.h:46</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aa3fe76b0ea4071b0db75df30a7d93c60"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">threading::MsgThread::queue_in</a></div><div class="ttdeci">Queue&lt; BasicInputMessage * &gt; queue_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00302">MsgThread.h:302</a></div></div>
<div class="ttc" id="classthreading_1_1Message_html_a4183548b421e0ddaa7de8006d174c939"><div class="ttname"><a href="classthreading_1_1Message.html#a4183548b421e0ddaa7de8006d174c939">threading::Message::Name</a></div><div class="ttdeci">const char * Name() const </div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00329">MsgThread.h:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5b6662cb2458a82933f982ce4179afd2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> * MsgThread::RetrieveOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pops a message sent by the child from the child-to-main queue.</p>
<p>This is method is called regularly by the <a class="el" href="classthreading_1_1Manager.html">threading::Manager</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>The message, wth ownership passed to caller. Returns null if the queue is empty. </dd></dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00344">344</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a>* msg = <a class="code" href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">queue_out</a>.Get();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> ( ! msg )</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="DebugLogger_8h.html#a6ae561b796b2ef9273683b54d8b6937e">DBG_LOG</a>(DBG_THREADING, <span class="stringliteral">&quot;Retrieved &#39;%s&#39; from %s&quot;</span>,  msg-&gt;<a class="code" href="classthreading_1_1Message.html#a4183548b421e0ddaa7de8006d174c939">Name</a>(), <a class="code" href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">Name</a>());</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div><div class="ttc" id="classthreading_1_1BasicOutputMessage_html"><div class="ttname"><a href="classthreading_1_1BasicOutputMessage.html">threading::BasicOutputMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00368">MsgThread.h:368</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a613cc56855b479b62e2089a58bd71d67"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">threading::MsgThread::queue_out</a></div><div class="ttdeci">Queue&lt; BasicOutputMessage * &gt; queue_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00303">MsgThread.h:303</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_ac100a20154201ff1f74da6ad3dc44383"><div class="ttname"><a href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">threading::BasicThread::Name</a></div><div class="ttdeci">const char * Name() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00046">BasicThread.h:46</a></div></div>
<div class="ttc" id="DebugLogger_8h_html_a6ae561b796b2ef9273683b54d8b6937e"><div class="ttname"><a href="DebugLogger_8h.html#a6ae561b796b2ef9273683b54d8b6937e">DBG_LOG</a></div><div class="ttdeci">#define DBG_LOG(args...)</div><div class="ttdef"><b>Definition:</b> <a href="DebugLogger_8h_source.html#l00104">DebugLogger.h:104</a></div></div>
<div class="ttc" id="classthreading_1_1Message_html_a4183548b421e0ddaa7de8006d174c939"><div class="ttname"><a href="classthreading_1_1Message.html#a4183548b421e0ddaa7de8006d174c939">threading::Message::Name</a></div><div class="ttdeci">const char * Name() const </div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00329">MsgThread.h:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a74ab8e545215cb92f696a9550f02920c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Overriden from <a class="el" href="classthreading_1_1BasicThread.html">BasicThread</a>. </p>

<p>Implements <a class="el" href="classthreading_1_1BasicThread.html#ac9f595e3dfc113f9720f17a261335b5c">threading::BasicThread</a>.</p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00370">370</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">while</span> ( ! (<a class="code" href="classthreading_1_1MsgThread.html#a2fe8fc9f6aac25b057aa583e13b50853">child_finished</a> || <a class="code" href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">Killed</a>() ) )</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a>* msg = <a class="code" href="classthreading_1_1MsgThread.html#afe4a74e7009fae1362008a6121315d05">RetrieveIn</a>();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">if</span> ( ! msg )</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordtype">bool</span> result = msg-&gt;<a class="code" href="classthreading_1_1Message.html#a03586bce9caf0b5e493947525508d4d1">Process</a>();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keyword">delete</span> msg;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> ( ! result )</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <a class="code" href="classthreading_1_1MsgThread.html#aac9d759bebe1d47a93a63be445fd7dc9">Error</a>(<span class="stringliteral">&quot;terminating thread&quot;</span>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="comment">// This will eventually kill this thread, but only</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="comment">// after all other outgoing messages (in particular</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="comment">// error messages have been processed by then main</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="comment">// thread).</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1MsgThread.html#aa85709a19905369d2b22f139245d7e88">KillMeMessage</a>(<span class="keyword">this</span>));</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <a class="code" href="classthreading_1_1MsgThread.html#a301baead4f28e12f7466a46c2f17f099">failed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">// In case we haven&#39;t sent the finish method yet, do it now. Reading</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// global network_time here should be fine, it isn&#39;t changing</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// anymore.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="classthreading_1_1MsgThread.html#a2fe8fc9f6aac25b057aa583e13b50853">child_finished</a> &amp;&amp; ! <a class="code" href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">Killed</a>() )</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <a class="code" href="classthreading_1_1MsgThread.html#ac5fc16807d58ac1babcb531b368c1a10">OnFinish</a>(<a class="code" href="Net_8cc.html#aafa2480e4a23e3822f639319b8a62ef3">network_time</a>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="classthreading_1_1MsgThread.html#a138946f549bbb406fd29d8ef8e6b6c25">Finished</a>();</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div><div class="ttc" id="classthreading_1_1BasicInputMessage_html"><div class="ttname"><a href="classthreading_1_1BasicInputMessage.html">threading::BasicInputMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00353">MsgThread.h:353</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aac9d759bebe1d47a93a63be445fd7dc9"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aac9d759bebe1d47a93a63be445fd7dc9">threading::MsgThread::Error</a></div><div class="ttdeci">virtual void Error(const char *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00280">MsgThread.cc:280</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a138946f549bbb406fd29d8ef8e6b6c25"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a138946f549bbb406fd29d8ef8e6b6c25">threading::MsgThread::Finished</a></div><div class="ttdeci">void Finished()</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00264">MsgThread.cc:264</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a301baead4f28e12f7466a46c2f17f099"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a301baead4f28e12f7466a46c2f17f099">threading::MsgThread::failed</a></div><div class="ttdeci">bool failed</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00310">MsgThread.h:310</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aa85709a19905369d2b22f139245d7e88"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa85709a19905369d2b22f139245d7e88">threading::MsgThread::KillMeMessage</a></div><div class="ttdeci">friend class KillMeMessage</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00184">MsgThread.h:184</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_ac5fc16807d58ac1babcb531b368c1a10"><div class="ttname"><a href="classthreading_1_1MsgThread.html#ac5fc16807d58ac1babcb531b368c1a10">threading::MsgThread::OnFinish</a></div><div class="ttdeci">virtual bool OnFinish(double network_time)=0</div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_afe4a74e7009fae1362008a6121315d05"><div class="ttname"><a href="classthreading_1_1MsgThread.html#afe4a74e7009fae1362008a6121315d05">threading::MsgThread::RetrieveIn</a></div><div class="ttdeci">BasicInputMessage * RetrieveIn()</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00355">MsgThread.cc:355</a></div></div>
<div class="ttc" id="Net_8cc_html_aafa2480e4a23e3822f639319b8a62ef3"><div class="ttname"><a href="Net_8cc.html#aafa2480e4a23e3822f639319b8a62ef3">network_time</a></div><div class="ttdeci">double network_time</div><div class="ttdef"><b>Definition:</b> <a href="Net_8cc_source.html#l00054">Net.cc:54</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a2fe8fc9f6aac25b057aa583e13b50853"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a2fe8fc9f6aac25b057aa583e13b50853">threading::MsgThread::child_finished</a></div><div class="ttdeci">bool child_finished</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00309">MsgThread.h:309</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_a85c119ad2ddad79d0f9e20a1e8345a79"><div class="ttname"><a href="classthreading_1_1BasicThread.html#a85c119ad2ddad79d0f9e20a1e8345a79">threading::BasicThread::Killed</a></div><div class="ttdeci">bool Killed() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00113">BasicThread.h:113</a></div></div>
<div class="ttc" id="classthreading_1_1Message_html_a03586bce9caf0b5e493947525508d4d1"><div class="ttname"><a href="classthreading_1_1Message.html#a03586bce9caf0b5e493947525508d4d1">threading::Message::Process</a></div><div class="ttdeci">virtual bool Process()=0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae77607ee28f3914321aefb926c7d45ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void threading::MsgThread::SendIn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends a message to the child thread. The message will be proceesed once the thread has retrieved it from its incoming queue.</p>
<p>Only the main thread may call this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00046">46</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classthreading_1_1MsgThread.html#ae77607ee28f3914321aefb926c7d45ca">SendIn</a>(msg, <span class="keyword">false</span>); }</div><div class="ttc" id="classthreading_1_1MsgThread_html_ae77607ee28f3914321aefb926c7d45ca"><div class="ttname"><a href="classthreading_1_1MsgThread.html#ae77607ee28f3914321aefb926c7d45ca">threading::MsgThread::SendIn</a></div><div class="ttdeci">void SendIn(BasicInputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00046">MsgThread.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a56e4bf984dd0f58c0c77c21ed80865d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::SendIn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queues a message for the child.</p>
<p>Must only be called by the main thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message.</td></tr>
    <tr><td class="paramname">force</td><td>If true, the message will be queued even when we're already <a class="el" href="classthreading_1_1BasicThread.html#ae1c2b27b2feb9c927f9a406f6b9373f8">Terminating()</a>. Normally, the message would be discarded in that case. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00316">316</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classthreading_1_1BasicThread.html#ae1c2b27b2feb9c927f9a406f6b9373f8">Terminating</a>() &amp;&amp; ! force )</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keyword">delete</span> msg;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="DebugLogger_8h.html#a6ae561b796b2ef9273683b54d8b6937e">DBG_LOG</a>(DBG_THREADING, <span class="stringliteral">&quot;Sending &#39;%s&#39; to %s ...&quot;</span>, msg-&gt;<a class="code" href="classthreading_1_1Message.html#a4183548b421e0ddaa7de8006d174c939">Name</a>(), <a class="code" href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">Name</a>());</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">queue_in</a>.Put(msg);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    ++<a class="code" href="classthreading_1_1MsgThread.html#a24dce9ceb45f65e8fe73df571ff36b8a">cnt_sent_in</a>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div><div class="ttc" id="classthreading_1_1BasicThread_html_ae1c2b27b2feb9c927f9a406f6b9373f8"><div class="ttname"><a href="classthreading_1_1BasicThread.html#ae1c2b27b2feb9c927f9a406f6b9373f8">threading::BasicThread::Terminating</a></div><div class="ttdeci">bool Terminating() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00106">BasicThread.h:106</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a24dce9ceb45f65e8fe73df571ff36b8a"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a24dce9ceb45f65e8fe73df571ff36b8a">threading::MsgThread::cnt_sent_in</a></div><div class="ttdeci">uint64_t cnt_sent_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00305">MsgThread.h:305</a></div></div>
<div class="ttc" id="classthreading_1_1BasicThread_html_ac100a20154201ff1f74da6ad3dc44383"><div class="ttname"><a href="classthreading_1_1BasicThread.html#ac100a20154201ff1f74da6ad3dc44383">threading::BasicThread::Name</a></div><div class="ttdeci">const char * Name() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00046">BasicThread.h:46</a></div></div>
<div class="ttc" id="DebugLogger_8h_html_a6ae561b796b2ef9273683b54d8b6937e"><div class="ttname"><a href="DebugLogger_8h.html#a6ae561b796b2ef9273683b54d8b6937e">DBG_LOG</a></div><div class="ttdeci">#define DBG_LOG(args...)</div><div class="ttdef"><b>Definition:</b> <a href="DebugLogger_8h_source.html#l00104">DebugLogger.h:104</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aa3fe76b0ea4071b0db75df30a7d93c60"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa3fe76b0ea4071b0db75df30a7d93c60">threading::MsgThread::queue_in</a></div><div class="ttdeci">Queue&lt; BasicInputMessage * &gt; queue_in</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00302">MsgThread.h:302</a></div></div>
<div class="ttc" id="classthreading_1_1Message_html_a4183548b421e0ddaa7de8006d174c939"><div class="ttname"><a href="classthreading_1_1Message.html#a4183548b421e0ddaa7de8006d174c939">threading::Message::Name</a></div><div class="ttdeci">const char * Name() const </div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00329">MsgThread.h:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a17794419e0f78b59656a4c54a82b359e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void threading::MsgThread::SendOut </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends a message from the child thread to the main thread.</p>
<p>Only the child thread may call this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The mesasge. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00055">55</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(msg, <span class="keyword">false</span>); }</div><div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a84f04909ca2066090d2c09fd607ed449"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::SendOut </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queues a message for the main thread.</p>
<p>Must only be called by the child thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message.</td></tr>
    <tr><td class="paramname">force</td><td>If true, the message will be queued even when we're already <a class="el" href="classthreading_1_1BasicThread.html#ae1c2b27b2feb9c927f9a406f6b9373f8">Terminating()</a>. Normally, the message would be discarded in that case. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00331">331</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classthreading_1_1BasicThread.html#ae1c2b27b2feb9c927f9a406f6b9373f8">Terminating</a>() &amp;&amp; ! force )</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keyword">delete</span> msg;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">queue_out</a>.Put(msg);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    ++<a class="code" href="classthreading_1_1MsgThread.html#aa980958d056c7da3d0990bbb47f62b1f">cnt_sent_out</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div><div class="ttc" id="classthreading_1_1BasicThread_html_ae1c2b27b2feb9c927f9a406f6b9373f8"><div class="ttname"><a href="classthreading_1_1BasicThread.html#ae1c2b27b2feb9c927f9a406f6b9373f8">threading::BasicThread::Terminating</a></div><div class="ttdeci">bool Terminating() const </div><div class="ttdef"><b>Definition:</b> <a href="BasicThread_8h_source.html#l00106">BasicThread.h:106</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_aa980958d056c7da3d0990bbb47f62b1f"><div class="ttname"><a href="classthreading_1_1MsgThread.html#aa980958d056c7da3d0990bbb47f62b1f">threading::MsgThread::cnt_sent_out</a></div><div class="ttdeci">uint64_t cnt_sent_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00306">MsgThread.h:306</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a613cc56855b479b62e2089a58bd71d67"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a613cc56855b479b62e2089a58bd71d67">threading::MsgThread::queue_out</a></div><div class="ttdeci">Queue&lt; BasicOutputMessage * &gt; queue_out</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00303">MsgThread.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac77284b9d8c84d2b3dc7bb8421075942"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MsgThread::Warning </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reports a warning from the child thread that may indicate a problem. The main thread will pass this to the <a class="el" href="classReporter.html">Reporter</a> once received.</p>
<p>Only the child thread may call this method.</p>
<p>Can be overriden in derived classed to hook into the error handling but must should generally also call the parent implementation. Note that this method is always called by the child thread and must not access data or datastructures of the main thread directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message. It will be prefixed with the thread's name. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classinput_1_1ReaderBackend.html#a69f1152fe1b73ff90d35103d3de6d6e5">input::ReaderBackend</a>.</p>

<p>Definition at line <a class="el" href="MsgThread_8cc_source.html#l00275">275</a> of file <a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">SendOut</a>(<span class="keyword">new</span> <a class="code" href="classthreading_1_1ReporterMessage.html">ReporterMessage</a>(<a class="code" href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127aab6ae45060ac939008876190154245ad">ReporterMessage::WARNING</a>, <span class="keyword">this</span>, msg));</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div><div class="ttc" id="classthreading_1_1ReporterMessage_html_a21d1ec6cb345947ebdb7677880b00127aab6ae45060ac939008876190154245ad"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html#a21d1ec6cb345947ebdb7677880b00127aab6ae45060ac939008876190154245ad">threading::ReporterMessage::WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00071">MsgThread.cc:71</a></div></div>
<div class="ttc" id="classthreading_1_1MsgThread_html_a17794419e0f78b59656a4c54a82b359e"><div class="ttname"><a href="classthreading_1_1MsgThread.html#a17794419e0f78b59656a4c54a82b359e">threading::MsgThread::SendOut</a></div><div class="ttdeci">void SendOut(BasicOutputMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8h_source.html#l00055">MsgThread.h:55</a></div></div>
<div class="ttc" id="classthreading_1_1ReporterMessage_html"><div class="ttname"><a href="classthreading_1_1ReporterMessage.html">threading::ReporterMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="MsgThread_8cc_source.html#l00067">MsgThread.cc:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a2c1fc8858c79883475bb535dfd43bb86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classthreading_1_1FinishedMessage.html">FinishedMessage</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00183">183</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8bb65d4e2daa28fee949d0a294716545"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classthreading_1_1FinishMessage.html">FinishMessage</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00182">182</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="acdf97f8df82a07975999dfebe63e7f3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classthreading_1_1HeartbeatMessage.html">HeartbeatMessage</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00181">181</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa85709a19905369d2b22f139245d7e88"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classthreading_1_1KillMeMessage.html">KillMeMessage</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00184">184</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="adddd5c43ff870a047aa66db4edf82a7e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classthreading_1_1Manager.html">Manager</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00180">180</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a2fe8fc9f6aac25b057aa583e13b50853"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool threading::MsgThread::child_finished</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00309">309</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="a24dce9ceb45f65e8fe73df571ff36b8a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t threading::MsgThread::cnt_sent_in</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00305">305</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa980958d056c7da3d0990bbb47f62b1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t threading::MsgThread::cnt_sent_out</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00306">306</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="a301baead4f28e12f7466a46c2f17f099"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool threading::MsgThread::failed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00310">310</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5c4788ad382aafd77261a76688ce598f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool threading::MsgThread::main_finished</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00308">308</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa3fe76b0ea4071b0db75df30a7d93c60"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classthreading_1_1Queue.html">Queue</a>&lt;<a class="el" href="classthreading_1_1BasicInputMessage.html">BasicInputMessage</a> *&gt; threading::MsgThread::queue_in</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00302">302</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<a class="anchor" id="a613cc56855b479b62e2089a58bd71d67"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classthreading_1_1Queue.html">Queue</a>&lt;<a class="el" href="classthreading_1_1BasicOutputMessage.html">BasicOutputMessage</a> *&gt; threading::MsgThread::queue_out</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="MsgThread_8h_source.html#l00303">303</a> of file <a class="el" href="MsgThread_8h_source.html">MsgThread.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/jasonlu/bro/src/threading/<a class="el" href="MsgThread_8h_source.html">MsgThread.h</a></li>
<li>/home/jasonlu/bro/src/threading/<a class="el" href="MsgThread_8cc_source.html">MsgThread.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
